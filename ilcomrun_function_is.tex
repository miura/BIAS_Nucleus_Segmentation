\ilcom{run} function is the most frequently used build-in macro function.


\fbox{
\parbox[b][3em][c]{0.80\textwidth}{
  \textbf{run("command"[, "options"])} 
  Executes an ImageJ menu command. The optional second argument contains values that are automatically entered into dialog boxes (must be GenericDialog or OpenDialog). Use the Command Recorder (Plugins>Macros>Record) to generate run() function calls. Use string concatenation to pass a variable as an argument. With ImageJ 1.43 and later, variables can be passed without using string concatenation by adding "\&" to the variable name.
}
}


The run function takes a menu item as the first argument, and optional values (values you fill in in dialog for many of the functions) in the second argument. In case of channel splitting, there is no option so the second argument is ignored.

We now want to work on the nucleus image. Activate (Click a window to bring up to the top) Channel 2 (red, nucleus image).

In the recorder, the function \ilcom{selectWindow("C1-NPCsingleNucleus.tif");} appears.

\fbox{
\parbox[b][3em][c]{0.80\textwidth}{
  \textbf{selectWindow("name")} \\
Activates the window with the title "name".
}
}

This function takes a title of a window as an argument and activates that window. When we used mouse to activate the nucleas channel stack, we did it manually by visually recognizing the name of the window. On the other hand, we want to figure out the name of the windows of each individual channles by some commands within macro so we could choose them using ``selectWindow''command after channel-splitting.

Standard behavior of ``Split Channel'' command is that it automatically names the resulting stacks of individual channels by appending ``C1-'' or ``C2-'' or ``C3'' in front of the original image title. We can construct these names if we knew the original image title. For this we use the command \ilcom{getTitle()} which returns the image title as a string.

\fbox{
\parbox[b][3em][c]{0.80\textwidth}{
\textbf{getTitle()} \\
Returns the title of the current image.
}
}

Here is the code to activate the nucleus channel automatically after the splitting. More importantly, we also acquire ``image ID''. This will be explained later.